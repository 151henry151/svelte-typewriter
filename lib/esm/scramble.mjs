import"svelte/internal";import{s as e}from"./Typewriter.mjs";let t=[];const n=e=>t.find((t=>t.currentNode===e)),r=e=>{const t=e.innerHTML.replaceAll(/(<([^>]+)>)/gi,"").split("").map(((t,r)=>{const{matchingLetters:o}=n(e),a=o.includes(r)||" "===t,i=String.fromCharCode(65+Math.round(50*Math.random()));return a?t:i})).join("");e.innerHTML=t},o=(e,t)=>{const r=e.innerHTML.replaceAll(/(<([^>]+)>)/gi,"");for(let o=0;o<t.length;o++){const a=t[o],{matchingLetters:i}=n(e);!i.includes(o)&&a===r[o]&&i.push(o)}};export default async({elements:n},a)=>{t=[...n.map((({currentNode:e})=>({currentNode:e,matchingLetters:[]})))],console.log(t),await new Promise((t=>{n.forEach((async({currentNode:n,text:i})=>{const s="number"==typeof a.scramble?a.scramble:3e3,c=(new Date).getTime();for(;;){r(n),o(n,i),await e(a.interval);const l=n.innerHTML!=i,m=(new Date).getTime()-c<s;if(!l||!m){t();break}}n.innerHTML=i}))})),a.dispatch("done")};
