"use strict";exports[Symbol.toStringTag]="Module";var e=require("./writeEffect.js");require("./sleep.js");let t=[];const r=r=>{for(;;){const n=e.rng(0,r.length),o="number"==typeof t&&n!==t;if(Array.isArray(t)&&!t.includes(n)||o){o&&(t=[]),t.push(n);return r[n]}t.length===r.length&&(t=t.pop())}},n=async({currentNode:t,text:r},n)=>{await e.writeEffect({currentNode:t,text:r},n);const o=r.replaceAll("&","&amp;");t.innerHTML===o&&await(async(t,r)=>{r.dispatch("done"),await e.typingInterval("number"==typeof r.loop?r.loop:1500);const n=t.innerHTML.replaceAll("&amp;","&");for(let o=n.length-1;o>=0;o--)">"===n[o]&&(o=n.lastIndexOf("<",o)),t.innerHTML=n.slice(0,o),await e.typingInterval(r.interval)})(t,n)};exports.mode=async(e,t)=>{for(;;)if(t.loop)for(const r of e)await n(r,t);else if(t.loopRandom){const o=r(e);await n(o,t)}};
